# AI-Powered Web Automation Testing Tool 使用指南

## 已启动的服务
- **PostgreSQL 数据库** (localhost:5432)
- **MinIO 对象存储** (localhost:9000/9001)
- **Case Service** (localhost:8001) - 测试用例管理服务
- **Report Service** (localhost:8002) - 报告服务
- **Exec Service** (localhost:3001) - 测试执行服务

## 服务启动状态
1. 后端大部分服务已启动
2. AI Service 由于端口占用未启动
3. 前端由于 Node.js 版本问题（需要 20.19+ 或 22.12+）未启动

## 如何使用

### 1. 启动 AI Service
```bash
cd "C:\Users\jiang\Documents\trae_projects\ai-test-tool\backend\ai-service"
python main.py
```

### 2. 启动前端
需要升级 Node.js 到 20.19+ 或 22.12+ 版本：
```bash
cd "C:\Users\jiang\Documents\trae_projects\ai-test-tool\frontend\ai-test-frontend"
pnpm dev
```

### 3. 访问应用
前端启动后访问: http://localhost:5173

### 4. 主要功能

#### 测试用例录制
1. 在 Chrome 中安装浏览器扩展（来自 browser-extension 目录）
2. 打开要测试的网页
3. 使用扩展录制操作
4. 录制完成后，AI 会自动生成测试用例

#### AI 功能
- **生成测试用例**: 根据录制的操作自动生成结构化测试用例
- **错误分析**: 当测试失败时，AI 会分析错误原因并提供修复建议
- **业务分析**: 分析业务描述，生成测试方案

#### 测试执行
1. 在管理界面创建测试项目
2. 上传或生成的测试用例
3. 执行测试
4. 查看详细报告，包括截图和 DOM 快照

### 5. API 接口

#### Case Service (8001)
- `GET /health` - 健康检查
- `POST /api/cases` - 创建测试用例
- `GET /api/cases` - 获取测试用例列表

#### Exec Service (3001)
- `POST /api/execute` - 执行测试用例

#### Report Service (8002)
- `GET /api/reports` - 获取测试报告
- `GET /api/reports/{id}` - 获取特定报告

#### AI Service (8003)
- `POST /api/ai/generate-case` - AI 生成测试用例
- `POST /api/ai/analyze-error` - AI 分析错误
- `GET /api/ai/test-connection` - 测试 AI 连接

### 6. 配置说明

#### 环境变量
- `OPENAI_API_KEY`: OpenAI API 密钥（可选）
- `OLLAMA_BASE_URL`: Ollama 服务地址（默认 http://localhost:11434）

#### 数据库
- PostgreSQL 默认配置：testuser/testpass123@localhost:5432/ai_test_tool

### 7. 浏览器扩展安装
1. 打开 Chrome，访问 `chrome://extensions/`
2. 开启"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择 `browser-extension` 目录

### 8. 故障排除

#### 端口被占用
使用 `netstat -ano | findstr ":端口号"` 查看占用情况
使用 `taskkill /PID 进程ID /F` 结束进程

#### Node.js 版本
访问 https://nodejs.org 下载并安装 20.19+ 或 22.12+ 版本